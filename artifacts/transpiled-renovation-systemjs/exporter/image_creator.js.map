{"version":3,"sources":["../../transpiled-renovation/exporter/image_creator.js"],"names":["exports","asyncEach","calcScaledInfo","getData","imageCreator","testFormats","_renderer","_interopRequireDefault","require","_color","_type","_svg","_iterator","_extend","_dom_adapter","_dom","_window","_inflector","_deferred","obj","__esModule","default","window","getWindow","_math","Math","PI","_min","min","_abs","abs","_sqrt","sqrt","_pow","pow","_atan2","atan2","_cos","cos","_sin","sin","_number","Number","IMAGE_QUALITY","TEXT_DECORATION_LINE_WIDTH_COEFF","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_TEXT_COLOR","parseAttributes","getStringFromCanvas","canvas","mimeType","dataURL","toDataURL","imageData","atob","substring","length","arcTo","x1","y1","x2","y2","radius","largeArcFlag","clockwise","context","cBx","cBy","aB","k","opSide","adjSide","centerX","centerY","startAngle","endAngle","arc","getElementOptions","element","rootAppended","attr","attributes","options","extend","text","textContent","replace","textAlign","transform","coords","match","translateX","translateY","rotationAngle","rotationX","rotationY","scaleX","scaleY","parseStyles","drawRect","x","y","width","height","cornerRadius","rx","rect","save","translate","moveTo","lineTo","restore","drawImage","shared","d","Deferred","image","Image","onload","globalAlpha","transformElement","clipElement","resolve","onerror","setAttribute","src","drawPath","dAttr","dArray","split","filter","item","trim","i","params","prevParams","prevParamsLen","j","bezierCurveTo","closePath","style","field","camelize","isElementNode","getComputedStyle","forEach","prop","textDecoration","textDecorationLine","isDefined","opacity","parseUrl","urlString","matches","setFontStyle","fontParams","fontSize","fontFamily","fill","fontStyle","push","fontWeight","font","join","fillStyle","drawText","applyFilter","fillText","strokeElement","drawTextDecoration","textWidth","measureText","textHeight","parseInt","lineHeight","fillElement","aggregateOpacity","strokeOpacity","undefined","fillOpacity","hasTspan","nodes","childNodes","tagName","drawTextElement","lines","line","offset","drawElement","elementOptions","mergedOptions","elements","widths","offsets","dy","parseFloat","commonWidth","reduce","xDiff","currentOffset","o","index","parentOptions","isText","isImage","visibility","HIDDEN_FOR_EXPORT","promise","beginPath","cx","cy","r","applyGradient","_ref","type","linearGradients","radialGradients","gradients","Object","keys","id","box","getBBox","horizontalCenter","verticalCenter","maxRadius","max","gradient","createLinearGradient","createRadialGradient","colors","opt","addColorStop","stopColor","_ref2","_gradients$id$transfo","angle","rotate","filterOptions","filters","offsetX","offsetY","blur","color","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","isFinite","scale","clipPaths","clip","hex2rgba","hexColor","alpha","g","b","createGradient","_element$attributes$g","gradientTransform","each","_","_ref3","value","createFilter","node","result","stdDeviation","dx","array","callback","arguments","isPromise","then","Array","prototype","slice","call","drawCanvasElements","toLowerCase","onDone","patterns","setLineDash","map","stroke","lineJoin","lineWidth","strokeStyle","strokeText","getPattern","pattern","patternCanvas","_createCanvas","patternContext","getContext","createPattern","search","newAttributes","name","drawBackground","backgroundColor","margin","fillRect","createInvisibleDiv","invisibleDiv","createElement","left","position","convertSvgToCanvas","svg","getCanvasFromSvg","markup","_ref4","_ref4$svgToCanvas","svgToCanvas","scaledScreenInfo","setTransform","pixelRatio","svgElem","getSvgElement","markupIsDomElement","getBody","appendChild","direction","dir","fromPromise","contains","always","removeChild","getImageData","format","isFunction","__parseAttributesFn","that","binaryData","data","Blob","useBase64","_getBlob","_getBase64","dataArray","Uint8Array","charCodeAt","buffer","btoa","hidden","formats","f","indexOf","supported","unsupported","devicePixelRatio"],"mappings":"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","file":"image_creator.js"}