{"version":3,"sources":["../../../../transpiled/ui/scheduler/resources/utils.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","setResourceToAppointment","reduceResourcesTree","loadResources","isResourceMultiple","groupAppointmentsByResourcesCore","groupAppointmentsByResources","getWrappedDataSource","getValueExpr","getResourcesDataByGroups","getResourceTreeLeaves","getResourceColor","getResourceByField","getPathToLeaf","getPaintedResources","getOrLoadResourceItem","getNormalizedResources","getGroupsObjectFromGroupsArray","getGroupCount","getFieldExpr","getDisplayExpr","getDataAccessors","getCellGroups","getAppointmentColor","getAllGroups","filterResources","createResourcesTree","createResourceEditorModel","createReducedResourcesTree","createExpressions","_utils","require","_data_source","_deferred","_data","_iterator","_extend","_type","_array","_object","_common","_hasResourceValue","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_defineProperty","key","value","_toPropertyKey","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","_extends","assign","bind","target","arguments","source","hasOwnProperty","apply","resource","valueExpr","displayExpr","fieldExpr","field","dataSource","DataSource","result","normalizeDataSourceOptions","pageSize","filter","groups","leafIndex","make","group","groupIndex","parent","itemIndex","items","_group$data","currentGroupItem","resultItem","id","title","text","data","children","nextGroupIndex","push","tree","findLeafByIndex","index","_leaf","makeBranch","leaf","reverse","path","groupsArray","reduce","currentGroups","_ref","groupCount","map","_","fieldName","loadedResources","resources","dataField","editorOptions","editorType","allowMultiple","label","resourceField","find","fields","indexOf","newGroups","useColorAsDefault","newResources","resourceLoaderMap","Deferred","isDefined","forEach","wrappedDataSource","has","set","load","get","done","getter","compileGetter","filteredData","equalByValue","resolve","fail","delete","reject","promise","dataAccessors","type","actions","config","appointments","totalResourceCount","appointment","treeLeaves","action","deepExtendArraySafe","rawAppointment","hasGroupItem","groupName","itemValue","resourceValue","hasResourceValue","wrapToArray","existingAppointments","_result","node","ok","resourceName","resourceTitle","resourceData","resourceGetter","resourceFromAppointment","fieldNames","currentResourcesData","each","_ref2","extend","currentResource","filteredItems","item","currentItems","currentData","resourcesSetter","setter","colorExpr","colorGetter","resourceConfig","appointmentConfig","itemData","paintedResources","cellGroups","resourcesDataAccessors","resourceValues","groupId","compileSetter","getTransformedResourceData","valueGetter","displayGetter","color","deferreds","deferred","dataSourcePromise","when","_len","_key","hasEmpty","some","r","isMultiple"],"mappings":"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","file":"utils.js"}