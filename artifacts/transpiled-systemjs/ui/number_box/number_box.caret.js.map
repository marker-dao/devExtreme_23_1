{"version":3,"sources":["../../../transpiled/ui/number_box/number_box.caret.js"],"names":["exports","getCaretBoundaries","getCaretAfterFormat","getCaretInBoundaries","isCaretInBoundaries","getCaretWithOffset","getCaretOffset","_math","require","_common","_number","_interopRequireDefault","_utils","obj","__esModule","default","text","format","signParts","split","sign","getSign","mockEscapedStubs","str","replace","map","join","substr","prefixStubLength","exec","length","postfixStubLength","start","end","_getDigitCountBeforeIndex","index","decimalSeparator","getDecimalSeparator","regExp","RegExp","escapeRegExp","textBeforePosition","slice","_reverseText","reverse","_getDigitPositionByIndex","digitIndex","counter","result","_trimNonNumericCharsFromEnd","caret","offset","undefined","formatted","point","isSeparatorBasedText","isSeparatorBasedString","realSeparatorOccurrenceIndex","getRealSeparatorIndex","occurrence","pointPosition","getNthOccurrence","newPointPosition","textParts","splitByIndex","formattedParts","isCaretOnFloat","relativeIndex","digitsBefore","newPosition","formattedIntPart","positionFromEnd","digitsFromEnd","newPositionFromEnd","newPositionFromBegin","match","boundaries","adjustedCaret","fitIntoRange","previousText","newText","previousBoundaries","newBoundaries"],"mappings":";;;;;AAAA;;;;AAEAA,UAAQC,kBAAR,GAA6BD,QAAQE,mBAAR,GAA8B,KAAK,CAAhE;AACAF,UAAQG,oBAAR,GAA+BA,oBAA/B;AACAH,UAAQI,mBAAR,GAA8BJ,QAAQK,kBAAR,GAA6BL,QAAQM,cAAR,GAAyB,KAAK,CAAzF;AACA,MAAIC,QAAQC,WAAQ,uBAAR,CAAZ;AACA,MAAIC,UAAUD,WAAQ,yBAAR,CAAd;AACA,MAAIE,UAAUC,uBAAuBH,WAAQ,2BAAR,CAAvB,CAAd;AACA,MAAII,SAASJ,WAAQ,SAAR,CAAb;AACA,WAASG,sBAAT,CAAgCE,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;AAC/F,MAAIZ,qBAAqB,SAASA,kBAAT,CAA4Be,IAA5B,EAAkCC,MAAlC,EAA0C;AACjE,QAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,UAAIC,YAAYD,OAAOE,KAAP,CAAa,GAAb,CAAhB;AACA,UAAIC,OAAOV,QAAQK,OAAR,CAAgBM,OAAhB,CAAwBL,IAAxB,EAA8BC,MAA9B,CAAX;AACAC,gBAAU,CAAV,IAAeA,UAAU,CAAV,KAAgB,MAAMA,UAAU,CAAV,CAArC;AACAD,eAASC,UAAUE,OAAO,CAAP,GAAW,CAAX,GAAe,CAAzB,CAAT;AACA,UAAIE,mBAAmB,SAASA,gBAAT,CAA0BC,GAA1B,EAA+B;AACpD,eAAOA,IAAIC,OAAJ,CAAY,YAAZ,EAA0B,UAAUD,GAAV,EAAe;AAC9C,iBAAOA,IAAIJ,KAAJ,CAAU,EAAV,EAAcM,GAAd,CAAkB,YAAY;AACnC,mBAAO,GAAP;AACD,WAFM,EAEJC,IAFI,CAEC,EAFD,EAEKC,MAFL,CAEY,CAFZ,CAAP;AAGD,SAJM,CAAP;AAKD,OAND;AAOAV,eAASK,iBAAiBL,MAAjB,CAAT;AACA,UAAIW,mBAAmB,YAAYC,IAAZ,CAAiBZ,MAAjB,EAAyB,CAAzB,EAA4Ba,MAAnD;AACA,UAAIC,oBAAoB,YAAYF,IAAZ,CAAiBZ,MAAjB,EAAyB,CAAzB,EAA4Ba,MAApD;AACA,aAAO;AACLE,eAAOJ,gBADF;AAELK,aAAKjB,KAAKc,MAAL,GAAcC;AAFd,OAAP;AAID,KAnBD,MAmBO;AACL,aAAO;AACLC,eAAO,CADF;AAELC,aAAKjB,KAAKc;AAFL,OAAP;AAID;AACF,GA1BD;AA2BA9B,UAAQC,kBAAR,GAA6BA,kBAA7B;AACA,MAAIiC,4BAA4B,SAASA,yBAAT,CAAmCC,KAAnC,EAA0CnB,IAA1C,EAAgD;AAC9E,QAAIoB,mBAAmB1B,QAAQK,OAAR,CAAgBsB,mBAAhB,EAAvB;AACA,QAAIC,SAAS,IAAIC,MAAJ,CAAW,UAAU,CAAC,GAAG9B,QAAQ+B,YAAZ,EAA0BJ,gBAA1B,CAAV,GAAwD,GAAnE,EAAwE,GAAxE,CAAb;AACA,QAAIK,qBAAqBzB,KAAK0B,KAAL,CAAW,CAAX,EAAcP,KAAd,CAAzB;AACA,WAAOM,mBAAmBjB,OAAnB,CAA2Bc,MAA3B,EAAmC,EAAnC,EAAuCR,MAA9C;AACD,GALD;AAMA,MAAIa,eAAe,SAASA,YAAT,CAAsB3B,IAAtB,EAA4B;AAC7C,WAAOA,KAAKG,KAAL,CAAW,EAAX,EAAeyB,OAAf,GAAyBlB,IAAzB,CAA8B,EAA9B,CAAP;AACD,GAFD;AAGA,MAAImB,2BAA2B,SAASA,wBAAT,CAAkCC,UAAlC,EAA8C9B,IAA9C,EAAoD;AACjF,QAAI,CAAC8B,UAAL,EAAiB;AACf,aAAO,CAAC,CAAR;AACD;AACD,QAAIR,SAAS,QAAb;AACA,QAAIS,UAAU,CAAd;AACA,QAAIZ,QAAQ,IAAZ;AACA,QAAIa,SAASV,OAAOT,IAAP,CAAYb,IAAZ,CAAb;AACA,WAAOgC,MAAP,EAAe;AACbb,cAAQa,OAAOb,KAAf;AACA,UAAIY,WAAWD,UAAf,EAA2B;AACzB,eAAOX,KAAP;AACD;AACDY;AACAC,eAASV,OAAOT,IAAP,CAAYb,IAAZ,CAAT;AACD;AACD,WAAOmB,UAAU,IAAV,GAAiBnB,KAAKc,MAAtB,GAA+BK,KAAtC;AACD,GAjBD;AAkBA,MAAIc,8BAA8B,SAASA,2BAAT,CAAqCjC,IAArC,EAA2C;AAC3E,WAAOA,KAAKQ,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAAP;AACD,GAFD;AAGA,MAAInB,qBAAqB,SAASA,kBAAT,CAA4B6C,KAA5B,EAAmCC,MAAnC,EAA2C;AAClE,QAAID,MAAMlB,KAAN,KAAgBoB,SAApB,EAA+B;AAC7BF,cAAQ;AACNlB,eAAOkB,KADD;AAENjB,aAAKiB;AAFC,OAAR;AAID;AACD,WAAO;AACLlB,aAAOkB,MAAMlB,KAAN,GAAcmB,MADhB;AAELlB,WAAKiB,MAAMjB,GAAN,GAAYkB;AAFZ,KAAP;AAID,GAXD;AAYAnD,UAAQK,kBAAR,GAA6BA,kBAA7B;AACA,MAAIH,sBAAsB,SAASA,mBAAT,CAA6Bc,IAA7B,EAAmCqC,SAAnC,EAA8CH,KAA9C,EAAqDjC,MAArD,EAA6D;AACrFiC,YAAQ7C,mBAAmB6C,KAAnB,EAA0B,CAA1B,CAAR;AACA,QAAII,QAAQ5C,QAAQK,OAAR,CAAgBsB,mBAAhB,EAAZ;AACA,QAAIkB,uBAAuBC,uBAAuBxC,IAAvB,CAA3B;AACA,QAAIyC,+BAA+B,CAAC,GAAG7C,OAAO8C,qBAAX,EAAkCzC,MAAlC,EAA0C0C,UAA7E;AACA,QAAIC,gBAAgBL,uBAAuB,CAAvB,GAA2B,CAAC,GAAG3C,OAAOiD,gBAAX,EAA6B7C,IAA7B,EAAmCsC,KAAnC,EAA0CG,4BAA1C,CAA/C;AACA,QAAIK,mBAAmB,CAAC,GAAGlD,OAAOiD,gBAAX,EAA6BR,SAA7B,EAAwCC,KAAxC,EAA+CG,4BAA/C,CAAvB;AACA,QAAIM,YAAY,CAAC,GAAGnD,OAAOoD,YAAX,EAAyBhD,IAAzB,EAA+B4C,aAA/B,CAAhB;AACA,QAAIK,iBAAiB,CAAC,GAAGrD,OAAOoD,YAAX,EAAyBX,SAAzB,EAAoCS,gBAApC,CAArB;AACA,QAAII,iBAAiBN,kBAAkB,CAAC,CAAnB,IAAwBV,MAAMlB,KAAN,GAAc4B,aAA3D;AACA,QAAIM,cAAJ,EAAoB;AAClB,UAAIC,gBAAgBjB,MAAMlB,KAAN,GAAc4B,aAAd,GAA8B,CAAlD;AACA,UAAIQ,eAAelC,0BAA0BiC,aAA1B,EAAyCJ,UAAU,CAAV,CAAzC,CAAnB;AACA,UAAIM,cAAcJ,eAAe,CAAf,IAAoBH,mBAAmB,CAAnB,GAAuBjB,yBAAyBuB,YAAzB,EAAuCH,eAAe,CAAf,CAAvC,CAAvB,GAAmF,CAAvG,GAA2GZ,UAAUvB,MAAvI;AACA,aAAO3B,qBAAqBkE,WAArB,EAAkChB,SAAlC,EAA6CpC,MAA7C,CAAP;AACD,KALD,MAKO;AACL,UAAIqD,mBAAmBrB,4BAA4BgB,eAAe,CAAf,CAA5B,CAAvB;AACA,UAAIM,kBAAkBR,UAAU,CAAV,EAAajC,MAAb,GAAsBoB,MAAMlB,KAAlD;AACA,UAAIwC,gBAAgBtC,0BAA0BqC,eAA1B,EAA2C5B,aAAaoB,UAAU,CAAV,CAAb,CAA3C,CAApB;AACA,UAAIU,qBAAqB5B,yBAAyB2B,aAAzB,EAAwC7B,aAAa2B,gBAAb,CAAxC,CAAzB;AACA,UAAII,uBAAuBJ,iBAAiBxC,MAAjB,IAA2B2C,qBAAqB,CAAhD,CAA3B;AACA,aAAOtE,qBAAqBuE,oBAArB,EAA2CrB,SAA3C,EAAsDpC,MAAtD,CAAP;AACD;AACF,GAvBD;AAwBAjB,UAAQE,mBAAR,GAA8BA,mBAA9B;AACA,WAASsD,sBAAT,CAAgCxC,IAAhC,EAAsC;AACpC,WAAOA,KAAKc,MAAL,KAAgB,CAAhB,IAAqB,CAAC,CAACd,KAAK2D,KAAL,CAAW,eAAX,CAA9B;AACD;AACD,MAAIvE,sBAAsB,SAASA,mBAAT,CAA6B8C,KAA7B,EAAoClC,IAApC,EAA0CC,MAA1C,EAAkD;AAC1EiC,YAAQ7C,mBAAmB6C,KAAnB,EAA0B,CAA1B,CAAR;AACA,QAAI0B,aAAazE,qBAAqB+C,KAArB,EAA4BlC,IAA5B,EAAkCC,MAAlC,CAAjB;AACA,WAAOiC,MAAMlB,KAAN,IAAe4C,WAAW5C,KAA1B,IAAmCkB,MAAMjB,GAAN,IAAa2C,WAAW3C,GAAlE;AACD,GAJD;AAKAjC,UAAQI,mBAAR,GAA8BA,mBAA9B;AACA,WAASD,oBAAT,CAA8B+C,KAA9B,EAAqClC,IAArC,EAA2CC,MAA3C,EAAmD;AACjDiC,YAAQ7C,mBAAmB6C,KAAnB,EAA0B,CAA1B,CAAR;AACA,QAAI0B,aAAa3E,mBAAmBe,IAAnB,EAAyBC,MAAzB,CAAjB;AACA,QAAI4D,gBAAgB;AAClB7C,aAAO,CAAC,GAAGzB,MAAMuE,YAAV,EAAwB5B,MAAMlB,KAA9B,EAAqC4C,WAAW5C,KAAhD,EAAuD4C,WAAW3C,GAAlE,CADW;AAElBA,WAAK,CAAC,GAAG1B,MAAMuE,YAAV,EAAwB5B,MAAMjB,GAA9B,EAAmC2C,WAAW5C,KAA9C,EAAqD4C,WAAW3C,GAAhE;AAFa,KAApB;AAIA,WAAO4C,aAAP;AACD;AACD,MAAIvE,iBAAiB,SAASA,cAAT,CAAwByE,YAAxB,EAAsCC,OAAtC,EAA+C/D,MAA/C,EAAuD;AAC1E,QAAIgE,qBAAqBhF,mBAAmB8E,YAAnB,EAAiC9D,MAAjC,CAAzB;AACA,QAAIiE,gBAAgBjF,mBAAmB+E,OAAnB,EAA4B/D,MAA5B,CAApB;AACA,WAAOiE,cAAclD,KAAd,GAAsBiD,mBAAmBjD,KAAhD;AACD,GAJD;AAKAhC,UAAQM,cAAR,GAAyBA,cAAzB","file":"number_box.caret.js"}