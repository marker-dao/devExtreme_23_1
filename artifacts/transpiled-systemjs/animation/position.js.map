{"version":3,"sources":["../../transpiled/animation/position.js"],"names":["exports","default","_size","require","_renderer","_interopRequireDefault","_common","_iterator","_window","_dom_adapter","_type","_extend","_position","_browser","_translator","_support","_devices","obj","__esModule","window","getWindow","horzRe","vertRe","collisionRe","scaleRe","IS_SAFARI","safari","normalizeAlign","raw","result","h","v","pair","splitPair","each","w","String","toLowerCase","test","normalizeOffset","pairToObject","normalizeCollision","getAlignFactor","align","inverseAlign","calculateOversize","data","bounds","oversize","myLocation","min","max","collisionSide","direction","initMyLocation","atLocation","atAlign","atSize","myAlign","mySize","offset","collisionResolvers","fit","flip","inverseData","extend","flipfit","none","scrollbarWidth","calculateScrollbarWidth","$scrollDiv","css","width","height","overflow","position","top","appendTo","get","offsetWidth","clientWidth","remove","defaultPositionResult","location","calculatePosition","what","options","$what","currentOffset","left","my","at","of","length","collision","boundary","boundaryOffset","getOuterWidth","getOuterHeight","preventDefault","pageX","pageY","isWindow","scrollLeft","scrollTop","real","deviceType","visualViewport","Math","offsetLeft","offsetTop","innerWidth","outerWidth","getWidth","innerHeight","outerHeight","getHeight","nodeType","ofRect","getBoundingRect","o","getOffsetWithoutScale","win","windowWidth","windowHeight","documentElement","getDocumentElement","hZoomLevel","touch","vZoomLevel","clientHeight","undefined","boundaryWidth","boundaryHeight","$boundary","boundaryPosition","preciser","number","precise","round","setScaleProperty","element","scale","transformProp","styleAttr","isEmpty","stylePropIsValid","isDefined","style","isNode","transform","replace","setAttribute","$startElement","_currentElement$getAt","_currentElement$style","_style$match","$currentElement","arguments","currentElement","getAttribute","call","match","parent","resetPosition","targetPosition","move","_default","calculate","setup","module"],"mappings":"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","file":"position.js"}