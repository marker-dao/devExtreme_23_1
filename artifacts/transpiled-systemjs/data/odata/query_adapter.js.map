{"version":3,"sources":["../../../transpiled/data/odata/query_adapter.js"],"names":["exports","odata","_type","require","_iterator","_config","_interopRequireDefault","_extend","_query_adapters","_utils","_errors","_utils2","obj","__esModule","default","DEFAULT_PROTOCOL_VERSION","STRING_FUNCTIONS","compileCriteria","protocolVersion","forceLowerCase","fieldTypes","createBinaryOperationFormatter","op","prop","val","concat","createStringFuncFormatter","reverse","bag","indexOf","toLowerCase","push","join","isStringFunction","name","some","funcName","formatters","formattersV2","extend","formattersV4","compileBinary","criteria","_fieldTypes","normalizeBinaryCriterion","fieldName","fieldType","errors","Error","formatter","value","convertPrimitiveValue","serializePropName","serializeValue","compileUnary","crit","compileCore","compileGroup","groupOperator","nextGroupOperator","each","index","criterion","Array","isArray","length","isConjunctiveOperator","isUnaryOperation","version","types","filterToLower","oDataFilterToLower","createODataQueryAdapter","queryOptions","_sorting","_criteria","_expand","expand","_select","_skip","_take","_countQuery","_oDataVersion","hasSlice","undefined","hasFunction","i","isFunction","requestData","result","generateSelect","generateExpand","requireTotalCount","tryLiftSelect","tasks","selectIndex","args","nextTask","optimize","exec","url","sendRequest","params","beforeSend","jsonp","withCredentials","countOnly","deserializeDates","isPaged","isFinite","multiSort","rules","getter","desc","rule","slice","skipCount","takeCount","filter","call","arguments","select","expr","count"],"mappings":"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","file":"query_adapter.js"}