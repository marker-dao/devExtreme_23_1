{"version":3,"sources":["../../../transpiled/viz/chart_components/layout_manager.js"],"names":["exports","LayoutManager","_type","require","_consts","_interopRequireDefault","_layout_element","obj","__esModule","default","floor","Math","sqrt","_min","min","_max","max","DEFAULT_INNER_RADIUS","RADIAL_LABEL_INDENT","radialLabelIndent","getNearestCoord","firstCoord","secondCoord","pointCenterCoord","nearestCoord","getLabelLayout","point","_label","isVisible","getLayoutOptions","position","getBoundingRect","getPieRadius","series","paneCenterX","paneCenterY","accessibleRadius","minR","some","singleSeries","getVisiblePoints","reduce","radiusIsFound","labelBBox","xCoords","x","width","yCoords","y","height","getLengthFromCenter","getSizeLabels","res","maxWidth","rWidth","outerLabelsCount","pieLabelSpacing","sizes","push","rSizes","common","correctLabelRadius","labelSizes","radius","canvas","averageWidthLabels","centerX","curRadius","i","runningWidth","length","setVisibleArea","left","right","top","bottom","getInnerRadius","_ref","type","innerRadius","isNumeric","Number","getAverageLabelWidth","sizeLabels","getFullRadiusWithLabels","correctAvailableRadius","availableRadius","fullRadiusWithLabels","toLayoutElementCoords","WrapperLayoutElement","prototype","constructor","setOptions","options","_options","applyPieChartSeriesLayout","hideLayoutLabels","paneSpaceHeight","paneSpaceWidth","piePercentage","minPiePercentage","centerY","radiusInner","radiusOuter","applyEqualPieChartLayout","layout","correctPieLabelRadius","availableLabelWidth","needMoreSpaceForPanesCanvas","panes","rotated","fixedSizeCallback","percentageIsValid","needHorizontalSpace","needVerticalSpace","forEach","pane","paneCanvas","minSize","undefined","paneSized","needPaneHorizontalSpace","needPaneVerticalSpace","layoutInsideLegend","legend","inverseAlign","center","layoutOptions","cutSide","my","horizontal","vertical","cutLayoutSide","of","at"],"mappings":"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","file":"layout_manager.js"}