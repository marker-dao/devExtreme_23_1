/**
* DevExtreme (cjs/__internal/scheduler/utils/resource_manager/agenda_group_utils.test.js)
* Version: 25.2.0
* Build date: Fri Nov 07 2025
*
* Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
* Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/
*/
"use strict";

var _globals = require("@jest/globals");
var _resource_manager = require("../../__mock__/resource_manager.mock");
var _agenda_group_utils = require("./agenda_group_utils");
(0, _globals.describe)('agenda group utils', () => {
  (0, _globals.describe)('reduceResourcesTree', () => {
    (0, _globals.it)('should reduce tree by appointments resources', async () => {
      const manager = (0, _resource_manager.getResourceManagerMock)();
      await manager.loadGroupResources(['roomId', 'nested.priorityId']);
      (0, _globals.expect)((0, _agenda_group_utils.reduceResourcesTree)(manager.resourceById, manager.groupsTree, [{
        itemData: {
          roomId: 0,
          nested: {
            priorityId: [1, 2]
          }
        }
      }, {
        itemData: {
          roomId: 1,
          nested: {
            priorityId: 2
          }
        }
      }])).toEqual([{
        children: [{
          children: [],
          grouped: {
            'nested.priorityId': 1,
            roomId: 0
          },
          resourceIndex: 'nested.priorityId',
          resourceText: 'Low Priority'
        }, {
          children: [],
          grouped: {
            'nested.priorityId': 2,
            roomId: 0
          },
          resourceIndex: 'nested.priorityId',
          resourceText: 'High Priority'
        }],
        grouped: {
          roomId: 0
        },
        resourceIndex: 'roomId',
        resourceText: 'Room 1'
      }, {
        children: [{
          children: [],
          grouped: {
            'nested.priorityId': 1,
            roomId: 1
          },
          resourceIndex: 'nested.priorityId',
          resourceText: 'Low Priority'
        }, {
          children: [],
          grouped: {
            'nested.priorityId': 2,
            roomId: 1
          },
          resourceIndex: 'nested.priorityId',
          resourceText: 'High Priority'
        }],
        grouped: {
          roomId: 1
        },
        resourceIndex: 'roomId',
        resourceText: 'Room 2'
      }]);
    });
    (0, _globals.it)('should reduce tree by zero appointments', async () => {
      const manager = (0, _resource_manager.getResourceManagerMock)();
      await manager.loadGroupResources(['roomId', 'nested.priorityId']);
      (0, _globals.expect)((0, _agenda_group_utils.reduceResourcesTree)(manager.resourceById, manager.groupsTree, [])).toEqual([]);
    });
  });
});
