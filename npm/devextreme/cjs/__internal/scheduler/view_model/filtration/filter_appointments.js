/**
* DevExtreme (cjs/__internal/scheduler/view_model/filtration/filter_appointments.js)
* Version: 25.2.0
* Build date: Wed Oct 15 2025
*
* Copyright (c) 2012 - 2025 Developer Express Inc. ALL RIGHTS RESERVED
* Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/
*/
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.filterAppointments = void 0;
var _add_all_day_panel_occupation = require("./utils/add_all_day_panel_occupation");
var _filter_by_attributes = require("./utils/filter_by_attributes/filter_by_attributes");
var _filter_by_intervals = require("./utils/filter_by_intervals/filter_by_intervals");
var _get_filter_options = require("./utils/get_filter_options/get_filter_options");
var _split_by_group_index = require("./utils/split_by_group_index");
var _split_by_recurrence = require("./utils/split_by_recurrence/split_by_recurrence");
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }
const addDuration = entities => entities.map(entity => _extends({}, entity, {
  duration: entity.endDateUTC - entity.startDateUTC
}));
const saveDatesBeforeSplit = entities => entities.map(entity => _extends({}, entity, {
  datesBeforeSplit: {
    startDateUTC: entity.startDateUTC,
    endDateUTC: entity.endDateUTC
  }
}));
const filterAppointments = (schedulerStore, items) => {
  const options = (0, _get_filter_options.getFilterOptions)(schedulerStore);
  const step1 = (0, _add_all_day_panel_occupation.addAllDayPanelOccupation)(items, options);
  const step2 = (0, _filter_by_attributes.filterByAttributes)(step1, options);
  const step3 = (0, _split_by_recurrence.splitByRecurrence)(step2, options);
  const step4 = (0, _filter_by_intervals.filterByIntervals)(step3, options);
  const step5 = addDuration(step4);
  const step6 = (0, _split_by_group_index.splitByGroupIndex)(step5, options);
  const step7 = saveDatesBeforeSplit(step6);
  return step7;
};
exports.filterAppointments = filterAppointments;
